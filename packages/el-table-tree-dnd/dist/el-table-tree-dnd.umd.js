(function(B,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(B=typeof globalThis<"u"?globalThis:B||self,s(B.ElTableTreeDnd={},B.Vue))})(this,function(B,s){"use strict";function H(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(){r.forEach(function(a){return a()})}}function Me(e){if(Array.isArray(e))return e}function Re(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,a,i,o,p=[],c=!0,g=!1;try{if(i=(t=t.call(e)).next,r!==0)for(;!(c=(n=i.call(t)).done)&&(p.push(n.value),p.length!==r);c=!0);}catch(h){g=!0,a=h}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(g)throw a}}return p}}function q(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function le(e,r){if(e){if(typeof e=="string")return q(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?q(e,r):void 0}}function He(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(e,r){return Me(e)||Re(e,r)||le(e,r)||He()}var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},M={},F={};Object.defineProperty(F,"__esModule",{value:!0}),F.bind=void 0;function Fe(e,r){var t=r.type,n=r.listener,a=r.options;return e.addEventListener(t,n,a),function(){e.removeEventListener(t,n,a)}}F.bind=Fe;var V={},R=de&&de.__assign||function(){return R=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0}),V.bindAll=void 0;var Ke=F;function ce(e){if(!(typeof e>"u"))return typeof e=="boolean"?{capture:e}:e}function $e(e,r){if(r==null)return e;var t=R(R({},e),{options:R(R({},ce(r)),ce(e.options))});return t}function We(e,r,t){var n=r.map(function(a){var i=$e(a,t);return(0,Ke.bind)(e,i)});return function(){n.forEach(function(i){return i()})}}V.bindAll=We,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var r=F;Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return r.bind}});var t=V;Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return t.bindAll}})}(M);var se="data-pdnd-honey-pot";function fe(e){return e instanceof Element&&e.hasAttribute(se)}function pe(e){var r=document.elementsFromPoint(e.x,e.y),t=ue(r,2),n=t[0],a=t[1];return n?fe(n)?a??null:n:null}function K(e){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},K(e)}function ze(e,r){if(K(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(K(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ue(e){var r=ze(e,"string");return K(r)=="symbol"?r:r+""}function $(e,r,t){return(r=Ue(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ye=2147483647;function ve(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ge(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ve(Object(t),!0).forEach(function(n){$(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var W=2,ye=W/2;function Ve(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function Xe(e){return{x:e.x-ye,y:e.y-ye}}function qe(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function _e(e){return{x:Math.min(e.x,window.innerWidth-W),y:Math.min(e.y,window.innerHeight-W)}}function me(e){var r=e.client,t=_e(qe(Xe(Ve(r))));return DOMRect.fromRect({x:t.x,y:t.y,width:W,height:W})}function he(e){var r=e.clientRect;return{left:"".concat(r.left,"px"),top:"".concat(r.top,"px"),width:"".concat(r.width,"px"),height:"".concat(r.height,"px")}}function Ge(e){var r=e.client,t=e.clientRect;return r.x>=t.x&&r.x<=t.x+t.width&&r.y>=t.y&&r.y<=t.y+t.height}function Ze(e){var r=e.initial,t=document.createElement("div");t.setAttribute(se,"true");var n=me({client:r});Object.assign(t.style,ge(ge({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},he({clientRect:n})),{},{pointerEvents:"auto",zIndex:Ye})),document.body.appendChild(t);var a=M.bind(window,{type:"pointermove",listener:function(o){var p={x:o.clientX,y:o.clientY};n=me({client:p}),Object.assign(t.style,he({clientRect:n}))},options:{capture:!0}});return function(o){var p=o.current;if(a(),Ge({client:p,clientRect:n})){t.remove();return}function c(){g(),t.remove()}var g=M.bindAll(window,[{type:"pointerdown",listener:c},{type:"pointermove",listener:c},{type:"focusin",listener:c},{type:"focusout",listener:c},{type:"dragstart",listener:c},{type:"dragenter",listener:c},{type:"dragover",listener:c}],{capture:!0})}}function Je(){var e=null;function r(){return e=null,M.bind(window,{type:"pointermove",listener:function(a){e={x:a.clientX,y:a.clientY}},options:{capture:!0}})}function t(){var n=null;return function(i){var o=i.eventName,p=i.payload;if(o==="onDragStart"){var c,g=p.location.initial.input,h=(c=e)!==null&&c!==void 0?c:{x:g.clientX,y:g.clientY};n=Ze({initial:h})}if(o==="onDrop"){var m,b=p.location.current.input;(m=n)===null||m===void 0||m({current:{x:b.clientX,y:b.clientY}}),n=null,e=null}}}return{bindEvents:r,getOnPostDispatch:t}}function Qe(e){if(Array.isArray(e))return q(e)}function et(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function be(e){return Qe(e)||et(e)||le(e)||tt()}function _(e){var r=null;return function(){if(!r){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=e.apply(this,a);r={result:o}}return r.result}}var rt=_(function(){return process.env.NODE_ENV==="test"?!1:navigator.userAgent.includes("Firefox")}),G=_(function(){if(process.env.NODE_ENV==="test")return!1;var r=navigator,t=r.userAgent;return t.includes("AppleWebKit")&&!t.includes("Chrome")}),Z={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function nt(e){var r=e.dragLeave;return G()?r.hasOwnProperty(Z.isLeavingWindow):!1}(function(){if(typeof window>"u"||process.env.NODE_ENV==="test"||!G())return;function r(){return{enterCount:0,isOverWindow:!1}}var t=r();function n(){t=r()}M.bindAll(window,[{type:"dragstart",listener:function(){t.enterCount=0,t.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(i){!t.isOverWindow&&t.enterCount===0&&(i[Z.isEnteringWindow]=!0),t.isOverWindow=!0,t.enterCount++}},{type:"dragleave",listener:function(i){t.enterCount--,t.isOverWindow&&t.enterCount===0&&(i[Z.isLeavingWindow]=!0,t.isOverWindow=!1)}}],{capture:!0})})();function at(e){return"nodeName"in e}function it(e){return at(e)&&e.ownerDocument!==document}function ot(e){var r=e.dragLeave,t=r.type,n=r.relatedTarget;return t!=="dragleave"?!1:G()?nt({dragLeave:r}):n==null?!0:rt()?it(n):n instanceof HTMLIFrameElement}function lt(e){var r=e.onDragEnd;return[{type:"pointermove",listener:function(){var t=0;return function(){if(t<20){t++;return}r()}}()},{type:"pointerdown",listener:r}]}function z(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var ut=function(r){var t=[],n=null,a=function(){for(var o=arguments.length,p=new Array(o),c=0;c<o;c++)p[c]=arguments[c];t=p,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a},J=ut(function(e){return e()}),X=function(){var e=null;function r(n){var a=requestAnimationFrame(function(){e=null,n()});e={frameId:a,fn:n}}function t(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:r,flush:t}}();function dt(e){var r=e.source,t=e.initial,n=e.dispatchEvent,a={dropTargets:[]};function i(p){n(p),a={dropTargets:p.payload.location.current.dropTargets}}var o={start:function(c){var g=c.nativeSetDragImage,h={current:t,previous:a,initial:t};i({eventName:"onGenerateDragPreview",payload:{source:r,location:h,nativeSetDragImage:g}}),X.schedule(function(){i({eventName:"onDragStart",payload:{source:r,location:h}})})},dragUpdate:function(c){var g=c.current;X.flush(),J.cancel(),i({eventName:"onDropTargetChange",payload:{source:r,location:{initial:t,previous:a,current:g}}})},drag:function(c){var g=c.current;J(function(){X.flush();var h={initial:t,previous:a,current:g};i({eventName:"onDrag",payload:{source:r,location:h}})})},drop:function(c){var g=c.current,h=c.updatedSourcePayload;X.flush(),J.cancel(),i({eventName:"onDrop",payload:{source:h??r,location:{current:g,previous:a,initial:t}}})}};return o}var Q={isActive:!1};function we(){return!Q.isActive}function ct(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function st(e){var r=e.current,t=e.next;if(r.length!==t.length)return!0;for(var n=0;n<r.length;n++)if(r[n].element!==t[n].element)return!0;return!1}function ft(e){var r=e.event,t=e.dragType,n=e.getDropTargetsOver,a=e.dispatchEvent;if(!we())return;var i=pt({event:r,dragType:t,getDropTargetsOver:n});Q.isActive=!0;var o={current:i};ee({event:r,current:i.dropTargets});var p=dt({source:t.payload,dispatchEvent:a,initial:i});function c(l){var u=st({current:o.current.dropTargets,next:l.dropTargets});o.current=l,u&&p.dragUpdate({current:o.current})}function g(l){var u=z(l),v=fe(l.target)?pe({x:u.clientX,y:u.clientY}):l.target,y=n({target:v,input:u,source:t.payload,current:o.current.dropTargets});y.length&&(l.preventDefault(),ee({event:l,current:y})),c({dropTargets:y,input:u})}function h(){o.current.dropTargets.length&&c({dropTargets:[],input:o.current.input}),p.drop({current:o.current,updatedSourcePayload:null}),m()}function m(){Q.isActive=!1,b()}var b=M.bindAll(window,[{type:"dragover",listener:function(u){g(u),p.drag({current:o.current})}},{type:"dragenter",listener:g},{type:"dragleave",listener:function(u){ot({dragLeave:u})&&(c({input:o.current.input,dropTargets:[]}),t.startedFrom==="external"&&h())}},{type:"drop",listener:function(u){if(o.current={dropTargets:o.current.dropTargets,input:z(u)},!o.current.dropTargets.length){h();return}u.preventDefault(),ee({event:u,current:o.current.dropTargets}),p.drop({current:o.current,updatedSourcePayload:t.type==="external"?t.getDropPayload(u):null}),m()}},{type:"dragend",listener:function(u){o.current={dropTargets:o.current.dropTargets,input:z(u)},h()}}].concat(be(lt({onDragEnd:h}))),{capture:!0});p.start({nativeSetDragImage:ct(r)})}function ee(e){var r,t=e.event,n=e.current,a=(r=n[0])===null||r===void 0?void 0:r.dropEffect;a!=null&&t.dataTransfer&&(t.dataTransfer.dropEffect=a)}function pt(e){var r=e.event,t=e.dragType,n=e.getDropTargetsOver,a=z(r);if(t.startedFrom==="external")return{input:a,dropTargets:[]};var i=n({input:a,source:t.payload,target:r.target,current:[]});return{input:a,dropTargets:i}}var De={canStart:we,start:ft},te=new Map;function vt(e){var r=e.typeKey,t=e.mount,n=te.get(r);if(n)return n.usageCount++,n;var a={typeKey:r,unmount:t(),usageCount:1};return te.set(r,a),a}function gt(e){var r=vt(e);return function(){r.usageCount--,!(r.usageCount>0)&&(r.unmount(),te.delete(e.typeKey))}}function Oe(e,r){var t=r.attribute,n=r.value;return e.setAttribute(t,n),function(){return e.removeAttribute(t)}}function Te(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Te(Object(t),!0).forEach(function(n){$(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Te(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function re(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=yt(e))||r){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(g){throw g},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,p;return{s:function(){t=t.call(e)},n:function(){var g=t.next();return i=g.done,g},e:function(g){o=!0,p=g},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw p}}}}function yt(e,r){if(e){if(typeof e=="string")return Ee(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ee(e,r)}}function Ee(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ne(e){return e.slice(0).reverse()}function mt(e){var r=e.typeKey,t=e.defaultDropEffect,n=new WeakMap,a="data-drop-target-for-".concat(r),i="[".concat(a,"]");function o(l){return n.set(l.element,l),function(){return n.delete(l.element)}}function p(l){if(process.env.NODE_ENV!=="production"){var u=n.get(l.element);u&&console.warn("You have already registered a [".concat(r,"] dropTarget on the same element"),{existing:u,proposed:l}),l.element instanceof HTMLIFrameElement&&console.warn(`
            We recommend not registering <iframe> elements as drop targets
            as it can result in some strange browser event ordering.
          `.replace(/\s{2,}/g," ").trim())}return H(Oe(l.element,{attribute:a,value:"true"}),o(l))}function c(l){var u,v,y,w,d=l.source,D=l.target,O=l.input,E=l.result,f=E===void 0?[]:E;if(D==null)return f;if(!(D instanceof Element))return D instanceof Node?c({source:d,target:D.parentElement,input:O,result:f}):f;var x=D.closest(i);if(x==null)return f;var S=n.get(x);if(S==null)return f;var I={input:O,source:d,element:S.element};if(S.canDrop&&!S.canDrop(I))return c({source:d,target:S.element.parentElement,input:O,result:f});var j=(u=(v=S.getData)===null||v===void 0?void 0:v.call(S,I))!==null&&u!==void 0?u:{},C=(y=(w=S.getDropEffect)===null||w===void 0?void 0:w.call(S,I))!==null&&y!==void 0?y:t,P={data:j,element:S.element,dropEffect:C,isActiveDueToStickiness:!1};return c({source:d,target:S.element.parentElement,input:O,result:[].concat(be(f),[P])})}function g(l){var u=l.eventName,v=l.payload,y=re(v.location.current.dropTargets),w;try{for(y.s();!(w=y.n()).done;){var d,D=w.value,O=n.get(D.element),E=N(N({},v),{},{self:D});O==null||(d=O[u])===null||d===void 0||d.call(O,E)}}catch(f){y.e(f)}finally{y.f()}}var h={onGenerateDragPreview:g,onDrag:g,onDragStart:g,onDrop:g,onDropTargetChange:function(u){var v=u.payload,y=new Set(v.location.current.dropTargets.map(function(Y){return Y.element})),w=new Set,d=re(v.location.previous.dropTargets),D;try{for(d.s();!(D=d.n()).done;){var O,E=D.value;w.add(E.element);var f=n.get(E.element),x=y.has(E.element),S=N(N({},v),{},{self:E});if(f==null||(O=f.onDropTargetChange)===null||O===void 0||O.call(f,S),!x){var I;f==null||(I=f.onDragLeave)===null||I===void 0||I.call(f,S)}}}catch(Y){d.e(Y)}finally{d.f()}var j=re(v.location.current.dropTargets),C;try{for(j.s();!(C=j.n()).done;){var P,A,k=C.value;if(!w.has(k.element)){var Le=N(N({},v),{},{self:k}),L=n.get(k.element);L==null||(P=L.onDropTargetChange)===null||P===void 0||P.call(L,Le),L==null||(A=L.onDragEnter)===null||A===void 0||A.call(L,Le)}}}catch(Y){j.e(Y)}finally{j.f()}}};function m(l){h[l.eventName](l)}function b(l){var u=l.source,v=l.target,y=l.input,w=l.current,d=c({source:u,target:v,input:y});if(d.length>=w.length)return d;for(var D=ne(w),O=ne(d),E=[],f=0;f<D.length;f++){var x,S=D[f],I=O[f];if(I!=null){E.push(I);continue}var j=E[f-1],C=D[f-1];if((j==null?void 0:j.element)!==(C==null?void 0:C.element))break;var P=n.get(S.element);if(!P)break;var A={input:y,source:u,element:P.element};if(P.canDrop&&!P.canDrop(A)||!((x=P.getIsSticky)!==null&&x!==void 0&&x.call(P,A)))break;E.push(N(N({},S),{},{isActiveDueToStickiness:!0}))}return ne(E)}return{dropTargetForConsumers:p,getIsOver:b,dispatchEvent:m}}function ht(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=bt(e))||r){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(g){throw g},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,p;return{s:function(){t=t.call(e)},n:function(){var g=t.next();return i=g.done,g},e:function(g){o=!0,p=g},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw p}}}}function bt(e,r){if(e){if(typeof e=="string")return Se(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Se(e,r)}}function Se(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Ae(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function wt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ae(Object(t),!0).forEach(function(n){$(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Dt(){var e=new Set,r=null;function t(i){r&&(!i.canMonitor||i.canMonitor(r.canMonitorArgs))&&r.active.add(i)}function n(i){var o=wt({},i);return e.add(o),t(o),function(){e.delete(o),r&&r.active.delete(o)}}function a(i){var o=i.eventName,p=i.payload;if(o==="onGenerateDragPreview"){r={canMonitorArgs:{initial:p.location.initial,source:p.source},active:new Set};var c=ht(e),g;try{for(c.s();!(g=c.n()).done;){var h=g.value;t(h)}}catch(y){c.e(y)}finally{c.f()}}if(r){for(var m=Array.from(r.active),b=0,l=m;b<l.length;b++){var u=l[b];if(r.active.has(u)){var v;(v=u[o])===null||v===void 0||v.call(u,p)}}o==="onDrop"&&(r.active.clear(),r=null)}}return{dispatchEvent:a,monitorForConsumers:n}}function Ot(e){var r=e.typeKey,t=e.mount,n=e.dispatchEventToSource,a=e.onPostDispatch,i=e.defaultDropEffect,o=Dt(),p=mt({typeKey:r,defaultDropEffect:i});function c(m){n==null||n(m),p.dispatchEvent(m),o.dispatchEvent(m),a==null||a(m)}function g(m){var b=m.event,l=m.dragType;De.start({event:b,dragType:l,getDropTargetsOver:p.getIsOver,dispatchEvent:c})}function h(){function m(){var b={canStart:De.canStart,start:g};return t(b)}return gt({typeKey:r,mount:m})}return{registerUsage:h,dropTarget:p.dropTargetForConsumers,monitor:o.monitorForConsumers}}var Tt=_(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),Et="pdnd:android-fallback",xe="text/plain",St="text/uri-list",At="application/vnd.pdnd",U=new WeakMap;function xt(e){return U.set(e.element,e),function(){U.delete(e.element)}}var Pe=Je(),ae=Ot({typeKey:"element",defaultDropEffect:"move",mount:function(r){return H(Pe.bindEvents(),M.bind(document,{type:"dragstart",listener:function(n){var a,i,o,p,c,g;if(r.canStart(n)&&!n.defaultPrevented){if(!n.dataTransfer){process.env.NODE_ENV!=="production"&&console.warn(`
              It appears as though you have are not testing DragEvents correctly.

              - If you are unit testing, ensure you have polyfilled DragEvent.
              - If you are browser testing, ensure you are dispatching drag events correctly.

              Please see our testing guides for more information:
              https://atlassian.design/components/pragmatic-drag-and-drop/core-package/testing
            `.replace(/ {2}/g,""));return}var h=n.target;if(!(h instanceof HTMLElement))return null;var m=U.get(h);if(!m)return null;var b=z(n),l={element:m.element,dragHandle:(a=m.dragHandle)!==null&&a!==void 0?a:null,input:b};if(m.canDrag&&!m.canDrag(l))return n.preventDefault(),null;if(m.dragHandle){var u=pe({x:b.clientX,y:b.clientY});if(!m.dragHandle.contains(u))return n.preventDefault(),null}var v=(i=(o=m.getInitialDataForExternal)===null||o===void 0?void 0:o.call(m,l))!==null&&i!==void 0?i:null;if(v)for(var y=0,w=Object.entries(v);y<w.length;y++){var d=ue(w[y],2),D=d[0],O=d[1];n.dataTransfer.setData(D,O??"")}var E=n.dataTransfer.types;Tt()&&!E.includes(xe)&&!E.includes(St)&&n.dataTransfer.setData(xe,Et),n.dataTransfer.setData(At,"");var f={element:m.element,dragHandle:(p=m.dragHandle)!==null&&p!==void 0?p:null,data:(c=(g=m.getInitialData)===null||g===void 0?void 0:g.call(m,l))!==null&&c!==void 0?c:{}},x={type:"element",payload:f,startedFrom:"internal"};r.start({event:n,dragType:x})}}}))},dispatchEventToSource:function(r){var t,n,a=r.eventName,i=r.payload;(t=U.get(i.source.element))===null||t===void 0||(n=t[a])===null||n===void 0||n.call(t,i)},onPostDispatch:Pe.getOnPostDispatch()}),Pt=ae.dropTarget,Ie=ae.monitor;function It(e){if(process.env.NODE_ENV!=="production"&&e.dragHandle&&!e.element.contains(e.dragHandle)&&console.warn("Drag handle element must be contained in draggable element",{element:e.element,dragHandle:e.dragHandle}),process.env.NODE_ENV!=="production"){var r=U.get(e.element);r&&console.warn("You have already registered a `draggable` on the same element",{existing:r,proposed:e})}return H(ae.registerUsage(),xt(e),Oe(e.element,{attribute:"draggable",value:"true"}))}function jt(e,r){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.includes(n))continue;t[n]=e[n]}return t}function Ct(e,r){if(e==null)return{};var t,n,a=jt(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var kt=["block"];function je(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ce(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?je(Object(t),!0).forEach(function(n){$(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):je(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ke=Symbol("tree-item-instruction");function Bt(e){return{x:(e.right+e.left)/2,y:(e.bottom+e.top)/2}}function ie(e){var r=e.client,t=e.borderBox,n=t.height/4;return r.y<=t.top+n?"reorder-above":r.y>=t.bottom-n?"reorder-below":"make-child"}function Nt(e){var r=e.element,t=e.input,n=e.currentLevel,a=e.indentPerLevel,i=e.mode,o={x:t.clientX,y:t.clientY},p=r.getBoundingClientRect();if(i==="standard"){var c=ie({borderBox:p,client:o});return{type:c,indentPerLevel:a,currentLevel:n}}var g=Bt(p);if(i==="expanded"){var h=ie({borderBox:p,client:o});return{type:h==="reorder-above"?h:"make-child",indentPerLevel:a,currentLevel:n}}var m=a*n;if(o.x<p.left+m){if(o.y<g.y)return{type:"reorder-above",indentPerLevel:a,currentLevel:n};var b=(o.x-p.left)/a,l=Math.max(Math.floor(b),0);return{type:"reparent",desiredLevel:l,indentPerLevel:a,currentLevel:n}}return{type:ie({borderBox:p,client:o}),indentPerLevel:a,currentLevel:n}}function Lt(e,r){var t=Object.keys(e).sort(),n=Object.keys(r).sort();return t.length!==n.length?!1:t.every(function(a){return e[a]===r[a]})}function Be(e,r){return e.type!==r.type?!1:e.type==="instruction-blocked"&&r.type==="instruction-blocked"?Be(e.desired,r.desired):Lt(e,r)}var Mt=function(){var e=null;return function(r){return e&&Be(e,r)?e:(e=r,r)}}();function Rt(e){var r=e.desired,t=e.block;if(t!=null&&t.includes(r.type)&&r.type!=="instruction-blocked"){var n={type:"instruction-blocked",desired:r};return n}return r}function Ht(e,r){var t=r.block,n=Ct(r,kt),a=Nt(n),i=Rt({desired:a,block:t}),o=Mt(i);return Ce(Ce({},e),{},$({},ke,o))}function Ne(e){var r;return(r=e[ke])!==null&&r!==void 0?r:null}const T={remove(e,r){if(!Array.isArray(e)||!r)throw new Error("Invalid input for remove method");return e.filter(t=>t.id!==r).map(t=>({...t,children:t.children?T.remove(t.children,r):void 0}))},insertBefore(e,r,t){if(!Array.isArray(e)||!r||!t)throw new Error("Invalid input for insertBefore method");return e.reduce((n,a)=>(a.id===r?n.push(t,a):n.push({...a,children:a.children?T.insertBefore(a.children,r,t):void 0}),n),[])},insertAfter(e,r,t){if(!Array.isArray(e)||!r||!t)throw new Error("Invalid input for insertAfter method");return e.reduce((n,a)=>(a.id===r?n.push(a,t):n.push({...a,children:a.children?T.insertAfter(a.children,r,t):void 0}),n),[])},insertChild(e,r,t){if(!Array.isArray(e)||!r||!t)throw new Error("Invalid input for insertChild method");return e.map(n=>n.id===r?{...n,children:[...n.children??[],t]}:{...n,children:n.children?T.insertChild(n.children,r,t):void 0})},find(e,r){if(!Array.isArray(e)||!r)throw new Error("Invalid input for find method");for(const t of e){if(t.id===r)return t;if(t.children){const n=T.find(t.children,r);if(n)return n}}},getPathToItem({current:e,targetId:r,parentIds:t=[]}){if(!Array.isArray(e)||!r||!t)throw new Error("Invalid input for getPathToItem method");for(const n of e){if(n.id===r)return[...t,n.id];if(n.children){const a=T.getPathToItem({current:n.children,targetId:r,parentIds:[...t,n.id].filter(i=>typeof i<"u")});if(a)return a}}},hasChildren(e){return e.children&&e.children.length>0},getAllIds(e){if(!Array.isArray(e))throw new Error("Invalid input for getAllIds method");let r=[];function t(n){var a;n.id&&r.push(n.id),T.hasChildren(n)&&((a=n.children)==null||a.forEach(i=>t(i)))}return e.forEach(n=>t(n)),r},traverse(e,r){if(!Array.isArray(e))throw new Error("Invalid input for traverseTree method");e.forEach(t=>{r(t),T.hasChildren(t)&&T.traverse(t.children??[],r)})}};function Ft(e,r){const t=T.find(e,r.itemId);if(!t)return e;if(r.type==="instruction"){const n=r.instruction;if(n.type==="reparent"){const a=T.getPathToItem({current:e,targetId:r.targetId});if(!a){console.error(`missing ${a}`);return}const i=a[n.desiredLevel];let o=T.remove(e,r.itemId);return o=T.insertAfter(o,i,t),o}if(r.itemId===r.targetId)return e;if(n.type==="reorder-above"){let a=T.remove(e,r.itemId);return a=T.insertBefore(a,r.targetId,t),a}if(n.type==="reorder-below"){let a=T.remove(e,r.itemId);return a=T.insertAfter(a,r.targetId,t),a}if(n.type==="make-child"){let a=T.remove(e,r.itemId);return a=T.insertChild(a,r.targetId,t),a}return console.warn("TODO: action not implemented",n),e}if(r.type==="modal-move"){let n=T.remove(e,t==null?void 0:t.id);const a=Kt(n,r.targetId)??[];if(a.length===0)r.targetId===""?n=[t]:n=T.insertChild(n,r.targetId,t);else if(r.index===a.length){const i=a[a.length-1];n=T.insertAfter(n,i.id,t)}else{const i=a[r.index];n=T.insertBefore(n,i.id,t)}return n}return e}function Kt(e,r){if(r==="")return e;const t=T.find(e,r);if(!t){console.error(`missing ${t}`);return}return t.children}let oe={};const $t=e=>{oe[e]=!0},Wt=()=>{oe={}},zt={key:0,class:"pl-2"},Ut={key:1,class:"pl-2"},Yt=s.defineComponent({__name:"el-table-tree-item-dnd",props:{column:{},item:{},expandItem:{type:Function},closeItem:{type:Function},allowDrag:{type:Function},allowDrop:{type:Function}},emits:["node-drag-start","node-drag-enter","node-drag-leave","node-drag-over","node-drag-end"],setup(e,{emit:r}){const t=e,n=r,a=s.ref(),i=s.ref(!1),o=s.ref(null);let p;return s.onMounted(()=>{var m,b,l;let c;a.value&&(c=(m=a.value)==null?void 0:m.closest(".el-table__row"));const g=s.ref(c),h=s.unref(g);h&&(oe[(b=t.item)==null?void 0:b.index]||($t((l=t.item)==null?void 0:l.index),p=H(It({element:h,getInitialData:()=>({...t.item.value,level:t.item.level,id:t.item.id}),onDragStart:u=>{var v;i.value=!0,(v=t==null?void 0:t.closeItem)==null||v.call(t,t.item.value),n("node-drag-start",u.source)},canDrag(){var u;return t!=null&&t.allowDrag&&typeof t.allowDrag=="function"?!!((u=t==null?void 0:t.allowDrag)!=null&&u.call(t,{dragSource:t.item.value})):!0},onDrop:()=>{var u;i.value=!1,(u=t==null?void 0:t.expandItem)==null||u.call(t,t.item.value)}}),Pt({element:h,getData:({input:u,element:v})=>{const y={id:t.item.id};return Ht(y,{input:u,element:v,indentPerLevel:16,currentLevel:t.item.level,mode:"standard",block:[]})},canDrop:({source:u})=>{var v,y;return t!=null&&t.allowDrop&&typeof t.allowDrop=="function"?!!((y=t==null?void 0:t.allowDrop)!=null&&y.call(t,{dragSource:u==null?void 0:u.data,dropTarget:(v=t.item)==null?void 0:v.value})):u.data.id!==t.item.id},onDrag:({self:u,source:v,location:y})=>{var w,d,D;o.value=Ne(u.data),n("node-drag-over",v==null?void 0:v.data,(D=(d=(w=y==null?void 0:y.current)==null?void 0:w.dropTargets)==null?void 0:d[0])==null?void 0:D.data)},onDragEnter:({source:u,location:v})=>{var y,w,d,D,O;u.data.id!==t.item.id&&((w=t==null?void 0:t.expandItem)==null||w.call(t,(y=t.item)==null?void 0:y.value)),n("node-drag-enter",u==null?void 0:u.data,(O=(D=(d=v==null?void 0:v.current)==null?void 0:d.dropTargets)==null?void 0:D[0])==null?void 0:O.data)},onDragLeave:({source:u,location:v})=>{var y,w,d;o.value=null,n("node-drag-leave",u==null?void 0:u.data,(d=(w=(y=v==null?void 0:v.current)==null?void 0:y.dropTargets)==null?void 0:w[0])==null?void 0:d.data)},onDrop:({source:u,location:v})=>{var y,w,d;o.value=null,v.current.dropTargets[0].data.id===t.item.id&&s.nextTick(()=>{var D,O;(O=t==null?void 0:t.expandItem)==null||O.call(t,(D=t.item)==null?void 0:D.value)}),n("node-drag-end",u==null?void 0:u.data,(d=(w=(y=v==null?void 0:v.current)==null?void 0:y.dropTargets)==null?void 0:w[0])==null?void 0:d.data)},getIsSticky:()=>!0}),Ie({canMonitor:({source:u})=>u.data.id!==t.item.id}))))}),s.onBeforeUnmount(()=>{p==null||p(),Wt()}),(c,g)=>{var h,m,b,l,u,v,y,w,d,D,O,E,f,x,S,I,j,C,P,A,k;return s.openBlock(),s.createElementBlock("span",{ref_key:"spanRef",ref:a,class:s.normalizeClass({"opacity-50":i.value})},[(m=(h=t.column)==null?void 0:h.slots)!=null&&m.default?(s.openBlock(),s.createElementBlock("span",zt,[s.renderSlot(c.$slots,(l=(b=t.column)==null?void 0:b.slots)==null?void 0:l.default)])):(s.openBlock(),s.createElementBlock("span",Ut,s.toDisplayString(((O=(u=t==null?void 0:t.column)==null?void 0:u.formatter)==null?void 0:O.call(u,(v=t.item)==null?void 0:v.value,t==null?void 0:t.column,(d=(y=t.item)==null?void 0:y.value)==null?void 0:d[(w=t.column)==null?void 0:w.prop],(D=t.item)==null?void 0:D.index))||((x=(E=t.item)==null?void 0:E.value)==null?void 0:x[(f=t.column)==null?void 0:f.prop])),1)),o.value?(s.openBlock(),s.createElementBlock("span",{key:2,class:s.normalizeClass(["absolute h-full w-full top-0 border-blue-500",{"!border-b-2":((S=o.value)==null?void 0:S.type)==="reorder-below","!border-t-2":((I=o.value)==null?void 0:I.type)==="reorder-above","!border-2 rounded":((j=o.value)==null?void 0:j.type)==="make-child"}]),style:s.normalizeStyle({left:`${((C=o.value)==null?void 0:C.currentLevel)*((P=o.value)==null?void 0:P.indentPerLevel)}px`,width:`calc(100% - ${((A=o.value)==null?void 0:A.currentLevel)*((k=o.value)==null?void 0:k.indentPerLevel)}px)`})},null,6)):s.createCommentVNode("",!0)],2)}}}),Vt={class:"el-table-tree-dnd"},Xt=((e,r)=>{const t=e.__vccOpts||e;for(const[n,a]of r)t[n]=a;return t})(s.defineComponent({__name:"el-table-tree-dnd",props:{data:{default:()=>[]},columns:{default:()=>[]},pagination:{},size:{},width:{},height:{},maxHeight:{},fit:{type:Boolean},stripe:{type:Boolean},border:{type:Boolean,default:!0},rowKey:{type:[String,Function],default:"id"},context:{},showHeader:{type:Boolean},showSummary:{type:Boolean},sumText:{},summaryMethod:{},rowClassName:{},rowStyle:{},cellClassName:{},cellStyle:{},headerRowClassName:{},headerRowStyle:{},headerCellClassName:{},headerCellStyle:{},highlightCurrentRow:{type:Boolean},currentRowKey:{},emptyText:{},expandRowKeys:{},defaultExpandAll:{type:Boolean,default:!0},defaultSort:{},tooltipEffect:{},tooltipOptions:{},spanMethod:{},selectOnIndeterminate:{type:Boolean},indent:{},treeProps:{default:()=>({hasChildren:"hasChildren",children:"children",label:"label"})},lazy:{type:Boolean,default:!1},load:{},className:{},style:{},tableLayout:{},scrollbarAlwaysOn:{type:Boolean},flexible:{type:Boolean},showOverflowTooltip:{type:[Boolean,Object],default:!0},draggable:{type:Boolean,default:!0},allowDrag:{},allowDrop:{}},emits:["node-drag-start","node-drop","node-drag-enter","node-drag-leave","node-drag-over","node-drag-end","selection-change","size-change","current-change"],setup(e,{expose:r,emit:t}){const n=e,a=t,i=s.ref(),o=b=>{var l;(l=i.value)==null||l.toggleRowExpansion(b,!0)},p=b=>{var l;(l=i.value)==null||l.toggleRowExpansion(b,!1)};let c;s.onMounted(()=>{c=H(Ie({onDrop(b){const{location:l,source:u}=b;if(!l.current.dropTargets.length)return;const v=u.data.id,y=l.current.dropTargets[0],w=y.data.id,d=Ne(y.data);if(d!==null){const D=Ft(n.data,{type:"instruction",instruction:d,itemId:v,targetId:w})??[],O=T.find(s.toRaw(n.data),w);a("node-drop",{newNodeData:D,oldNodeData:s.toRaw(n.data),dragSource:u.data,dropTarget:O})}}}))}),s.onBeforeUnmount(()=>{c==null||c()});const g=b=>{a("node-drag-start",{dragSource:b})},h=(b,l,u)=>{const v=T.find(s.toRaw(n.data),l==null?void 0:l.id);a(`node-drag-${u}`,{dragSource:b,dropTarget:v})},m=s.computed(()=>Object.assign({small:!1,background:!1,pagerCount:7,layout:"sizes, prev, pager, next, jumper, ->, total",pageSizes:[10,20,30,40,50,100],disabled:!1,hideOnSinglePage:!1,total:10},(n==null?void 0:n.pagination)||{}));return r({getElTableExpose:async()=>(await s.nextTick(),i==null?void 0:i.value)}),(b,l)=>{const u=s.resolveComponent("el-table-column"),v=s.resolveComponent("el-table"),y=s.resolveComponent("el-pagination"),w=s.resolveDirective("loading");return s.openBlock(),s.createElementBlock("div",Vt,[s.withDirectives((s.openBlock(),s.createBlock(v,{ref_key:"tableRef",ref:i,data:n.data,"row-key":n.rowKey,border:n.border,"default-expand-all":n.defaultExpandAll,showOverflowTooltip:n.showOverflowTooltip,lazy:n.lazy,"tree-props":{children:"children",hasChildren:"hasChildren"},onSelectionChange:l[4]||(l[4]=d=>{a("selection-change",d)})},{default:s.withCtx(()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.columns,(d,D)=>{var O,E;return s.openBlock(),s.createBlock(u,s.mergeProps({key:`table-column-${D}`,align:d.align,headerAlign:d.headerAlign,prop:d==null?void 0:d.prop,label:d.label,type:d.type,"reserve-selection":d.reserveSelection,selectable:d.selectable,fixed:d.fixed,width:d.width,ref_for:!0},d),s.createSlots({_:2},[(O=d==null?void 0:d.slots)!=null&&O.header?{name:"header",fn:s.withCtx(()=>{var f;return[s.renderSlot(b.$slots,(f=d==null?void 0:d.slots)==null?void 0:f.header,{},void 0,!0)]}),key:"0"}:void 0,d.type!=="selection"&&d.type!=="index"&&n.draggable?{name:"default",fn:s.withCtx(f=>{var x,S,I,j,C,P;return[s.createVNode(Yt,{item:{id:(x=f==null?void 0:f.row)==null?void 0:x.id,index:f==null?void 0:f.$index,level:(S=f==null?void 0:f.treeNode)==null?void 0:S.level,value:f==null?void 0:f.row,hasChildren:!!((j=(I=f==null?void 0:f.row)==null?void 0:I.children)!=null&&j.length)},column:d,"expand-item":o,"close-item":p,onNodeDragStart:g,onNodeDragEnter:l[0]||(l[0]=(A,k)=>{h(A,k,"enter")}),onNodeDragLeave:l[1]||(l[1]=(A,k)=>{h(A,k,"leave")}),onNodeDragOver:l[2]||(l[2]=(A,k)=>{h(A,k,"over")}),onNodeDragEnd:l[3]||(l[3]=(A,k)=>{h(A,k,"end")}),"allow-drag":n==null?void 0:n.allowDrag,"allow-drop":n==null?void 0:n.allowDrop},s.createSlots({_:2},[(C=d==null?void 0:d.slots)!=null&&C.default?{name:(P=d==null?void 0:d.slots)==null?void 0:P.default,fn:s.withCtx(()=>{var A;return[s.renderSlot(b.$slots,(A=d==null?void 0:d.slots)==null?void 0:A.default,{row:f==null?void 0:f.row,column:"column",$index:f==null?void 0:f.$index},void 0,!0)]}),key:"0"}:void 0]),1032,["item","column","allow-drag","allow-drop"])]}),key:"1"}:void 0,!n.draggable&&((E=d==null?void 0:d.slots)!=null&&E.default)?{name:"default",fn:s.withCtx(f=>{var x;return[s.renderSlot(b.$slots,(x=d==null?void 0:d.slots)==null?void 0:x.default,{row:f==null?void 0:f.row,column:"column",$index:f==null?void 0:f.$index},void 0,!0)]}),key:"2"}:void 0]),1040,["align","headerAlign","prop","label","type","reserve-selection","selectable","fixed","width"])}),128))]),_:3},8,["data","row-key","border","default-expand-all","showOverflowTooltip","lazy"])),[[w,n.loading]]),n.pagination?(s.openBlock(),s.createBlock(y,s.mergeProps({key:0},m.value,{onSizeChange:l[5]||(l[5]=d=>{a("size-change",d)}),onCurrentChange:l[6]||(l[6]=d=>{a("current-change",d)}),style:{"margin-top":"10px"}}),null,16)):s.createCommentVNode("",!0)])}}}),[["__scopeId","data-v-047b155f"]]);B.default=Xt,B.treeHandler=T,Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
